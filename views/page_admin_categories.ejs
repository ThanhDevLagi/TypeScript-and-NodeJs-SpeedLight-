<%-include('./templates/header_admin.ejs')%>
<div class="col-10" id="main-admin">
    <div class="main--content">
      <div class="header--wrapper">
        <div class="header--title">
          <span>Primary</span>
          <h2>Doanh Mục</h2>
        </div>
        <div class="search--box">
          <i class="fa-solid fa-magnifying-glass"></i>
          <input type="text" placeholder="Tìm kiếm tại đây">
        </div>
        <div class="user--info">
          <div class="">
            <i class="fa-regular fa-comment"></i>
          </div>
          <div class="">
            <i class="fa-regular fa-bell"></i>
          </div>
          <div class="user-admin">
            <img src="../../public/imges/personal-rate/person1.jpg" alt="">
          </div>
        </div>
      </div>
    </div>
    <div class="d-flex">
      <a href="/admin/createCategories" class="ms-auto create-product mb-3">Tạo Doanh Mục</a>
    </div>
    <div class="table-wrapper">
        <table class="fl-table">
            <thead>
            <tr>
                <th>ID Danh Mục</th>
                <th>Tên Danh Mục</th>
                <th>Tổng Sản Phẩm</th>
                <th>Trạng Thái</th>
            </tr>
            </thead>
            <tbody id="showbill">
              <% getCategories.forEach(item => { %>
                <tr>
                    <td><%= item.id_category %></td>
                    <td><%= item.name_category %></td>
                    <td>
                        <% let productCount = getAllProducts.filter(product => product.brand === item.id_category).length; %>
                        <p><%= productCount %></p>
                    </td>
                    <td style="width: 220px;">
                        <a href="/admin/categories/<%= item.id%>" type="button" class="btn btn-primary edit-btn" data-id="<%= item.id %>">Chỉnh Sửa</a>
                        <a href="/admin/categories/<%= item.id %>/delete" type="button" class="btn btn-danger edit-btn" data-id="<%= item.id %>">Xóa</a>
                    </td>
                </tr>   
            <% }) %>
            
                         
            <tbody>
        </table>
    </div>
  </div>

<%-include('./templates/footer_admin.ejs')%>
